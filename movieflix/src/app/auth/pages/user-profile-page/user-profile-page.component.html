<div class="flex-container">
  <h2 id="page-title">Welcome back, {{userName}}</h2>
  <div class="button-container">
    <p-button  (click)="toggleUserDetails()" ><i class="bi bi-person-gear mr-2"></i> Edit Details</p-button>
  </div>
</div>


<div *ngIf="showUserDetails" >
  <form [formGroup]="userDetailsForm!" class="form-container">
    <h3 class="text-center">Update your information</h3>

    <label class="mb-2" htmlFor="name">Name</label>
    <input type="text" pInputText formControlName="name">  

      <span *ngIf="userDetailsForm!.get('name')?.hasError('required') && userDetailsForm!.get('name')?.touched" class="error-message">
        Name is required.
      </span>

    <label class="mb-2" htmlFor="email">Email</label>
    <input type="text" pInputText formControlName="email">
      <span *ngIf="userDetailsForm!.get('email')?.hasError('required') && userDetailsForm!.get('email')?.touched" class="error-message">
        Email is required.
      </span>
      <span *ngIf="userDetailsForm!.get('email')?.hasError('required') && userDetailsForm!.get('email')?.touched" class="error-message mt-2">
        Email format required.
      </span>

    <label class="mb-2" htmlFor="password">Password</label>
    <input type="password" pInputText formControlName="password" />
  
      <span *ngIf="userDetailsForm!.get('password')?.hasError('required') && userDetailsForm!.get('password')?.touched" class="error-message">
        Password is required.
      </span>
      <span *ngIf="userDetailsForm!.get('password')?.hasError('minlength') && userDetailsForm!.get('password')?.touched" class="error-message">
        Minimum 3 characters are needed.
      </span>

  
    
    <label class="mb-2" htmlFor="password2">Confirm password</label>
    <input type="password" pInputText formControlName="password2" />
      <span *ngIf="userDetailsForm!.get('password2') !== userDetailsForm!.get('password') && userDetailsForm!.get('password2')?.touched" class="error-message">
        Passwords must match.
      </span>

    <p-toast></p-toast>
    <p-button type="button" class="align-self-center" (click)="saveUserDetails()"><i class="bi bi-person-check-fill mr-2"></i> Save</p-button>
  </form>

</div>




<div *ngIf="movies.length">
  <h2 class="ml-4">Favorite Movies</h2>
  <card-list [movies]="movies"></card-list>
</div>


<div *ngIf="series.length">
  <h2 class="ml-4 mt-5">Favorite Series</h2>
  <card-list [series]="series"></card-list>
</div>

<div *ngIf="movies.length === 0 && series.length === 0">
  <h2 class="text-center">There are no favorite movies or series</h2> 
</div>
