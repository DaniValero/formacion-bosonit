<h1 class="text-center">Admin Panel</h1>

<div class="card p-2" *ngIf="editMode === false">
  <p-table [value]="users" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '30rem'}">
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Admin</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td>{{user.name}}</td>
        <td>{{user.email}}</td>
        <td *ngIf="user.isAdmin"><i class="bi bi-check-lg"></i></td>
        <td *ngIf="!user.isAdmin"><i class="bi bi-x-lg"></i></td>
        <td class="flex justify-content-around">
          <p-button (onClick)="editUser(user.id)" styleClass="p-button-warning">
            <i class="bi bi-pencil-fill"></i>
          </p-button>
          
          <p-button styleClass="p-button-danger"><i class="bi bi-x-circle"></i></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>


<div class="p-3 flex flex-column justify-content-center align-items-center" *ngIf="editMode">

  <h2>Edit User</h2>

  <form (ngSubmit)="onSubmit()" #userForm="ngForm" class="form-container">
    
    
    <label class="mb-2"for="name">Name:</label>
    <input type="text" id="name" name="name" [(ngModel)]="user!.name" required>
    
    
    <label class="mb-2" for="email">Email:</label>
    <input type="email" id="email" name="email" [(ngModel)]="user!.email" required>
    
    
    <label for="name">Admin:</label>
    <p-toggleButton [(ngModel)]="user!.isAdmin" [ngModelOptions]="{standalone: true}" onLabel="Yes" offLabel="No" class="admin-toggle"></p-toggleButton>
    


   
    <div class="flex justify-content-around mt-3">
      <p-button type="submit">Save</p-button>
      <p-button (click)="exitForm()" styleClass="p-button-warning">Cancel</p-button>
    </div>
  </form>
  <p-toast></p-toast>
</div>
